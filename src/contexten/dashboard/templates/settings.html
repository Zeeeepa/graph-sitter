<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contexten Dashboard - Settings</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .settings-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .header h1 {
            color: #2c3e50;
            margin: 0 0 10px 0;
            font-size: 2.5em;
            font-weight: 700;
        }
        
        .header p {
            color: #7f8c8d;
            margin: 0;
            font-size: 1.2em;
        }
        
        .settings-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .settings-section h2 {
            color: #2c3e50;
            margin: 0 0 20px 0;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .config-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #667eea;
        }
        
        .config-item h3 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 1.1em;
        }
        
        .config-item .status {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .config-item .status.connected {
            color: #28a745;
        }
        
        .config-item .status.disconnected {
            color: #dc3545;
        }
        
        .config-item .description {
            color: #7f8c8d;
            font-size: 0.9em;
            line-height: 1.4;
        }
        
        .env-example {
            background: #f1f3f4;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .env-example code {
            color: #2c3e50;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }
        
        .actions {
            text-align: center;
            margin-top: 20px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .feature-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .feature-item .icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .feature-item h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }
        
        .feature-item p {
            color: #7f8c8d;
            font-size: 0.9em;
            margin: 0;
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="settings-container">
        <a href="/" class="back-link">‚Üê Back to Dashboard</a>
        
        <!-- Header -->
        <div class="header">
            <h1>‚öôÔ∏è Settings & Configuration</h1>
            <p>Manage your Contexten Dashboard configuration and integrations</p>
        </div>
        
        <!-- Environment Configuration -->
        <div class="settings-section">
            <h2>üîë Environment Configuration</h2>
            
            <div class="config-grid">
                <div class="config-item">
                    <h3>GitHub Integration</h3>
                    <div class="status {{ 'connected' if github_token else 'disconnected' }}">
                        {{ "‚úÖ Connected" if github_token else "‚ùå Not Configured" }}
                    </div>
                    <div class="description">
                        GitHub token for repository access, PR management, and issue tracking.
                    </div>
                </div>
                
                <div class="config-item">
                    <h3>Linear Integration</h3>
                    <div class="status {{ 'connected' if linear_api_key else 'disconnected' }}">
                        {{ "‚úÖ Connected" if linear_api_key else "‚ùå Not Configured" }}
                    </div>
                    <div class="description">
                        Linear API key for project management and issue synchronization.
                    </div>
                </div>
                
                <div class="config-item">
                    <h3>Slack Integration</h3>
                    <div class="status {{ 'connected' if slack_webhook_url else 'disconnected' }}">
                        {{ "‚úÖ Connected" if slack_webhook_url else "‚ùå Not Configured" }}
                    </div>
                    <div class="description">
                        Slack webhook URL for notifications and team communication.
                    </div>
                </div>
                
                <div class="config-item">
                    <h3>Prefect Integration</h3>
                    <div class="status {{ 'connected' if prefect_api_url else 'disconnected' }}">
                        {{ "‚úÖ Connected" if prefect_api_url else "‚ùå Not Configured" }}
                    </div>
                    <div class="description">
                        Prefect API URL for workflow orchestration and monitoring.
                    </div>
                </div>
            </div>
            
            <h3>üìù Environment Setup Guide</h3>
            <p>To configure your integrations, create a <code>.env</code> file in your project root with the following variables:</p>
            
            <div class="env-example">
                <code>
# GitHub Integration<br>
GITHUB_TOKEN=ghp_your_github_personal_access_token<br>
<br>
# Linear Integration<br>
LINEAR_API_KEY=lin_api_your_linear_api_key<br>
<br>
# Slack Integration<br>
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook/url<br>
<br>
# Prefect Integration (Optional)<br>
PREFECT_API_URL=https://api.prefect.cloud/api/accounts/your-account/workspaces/your-workspace<br>
PREFECT_WORKSPACE=your-workspace-name<br>
<br>
# Codegen SDK (Optional)<br>
CODEGEN_ORG_ID=your_organization_id<br>
CODEGEN_TOKEN=your_codegen_api_token
                </code>
            </div>
            
            <h3>üîó Getting API Tokens</h3>
            <div class="feature-grid">
                <div class="feature-item">
                    <div class="icon">üêô</div>
                    <h4>GitHub Token</h4>
                    <p>Go to GitHub Settings ‚Üí Developer settings ‚Üí Personal access tokens</p>
                </div>
                <div class="feature-item">
                    <div class="icon">üìê</div>
                    <h4>Linear API Key</h4>
                    <p>Go to Linear Settings ‚Üí API ‚Üí Create new API key</p>
                </div>
                <div class="feature-item">
                    <div class="icon">üí¨</div>
                    <h4>Slack Webhook</h4>
                    <p>Create a Slack app and add an Incoming Webhook</p>
                </div>
                <div class="feature-item">
                    <div class="icon">üåä</div>
                    <h4>Prefect API</h4>
                    <p>Sign up for Prefect Cloud and get your workspace URL</p>
                </div>
            </div>
        </div>
        
        <!-- Dashboard Features -->
        <div class="settings-section">
            <h2>üöÄ Dashboard Features</h2>
            
            <div class="feature-grid">
                <div class="feature-item">
                    <div class="icon">üìä</div>
                    <h4>Real-time Monitoring</h4>
                    <p>Monitor system health, active flows, and integration status</p>
                </div>
                <div class="feature-item">
                    <div class="icon">üîÑ</div>
                    <h4>CI/CD Automation</h4>
                    <p>Automated workflow management and deployment pipelines</p>
                </div>
                <div class="feature-item">
                    <div class="icon">üîç</div>
                    <h4>Code Analysis</h4>
                    <p>Comprehensive codebase analysis and quality metrics</p>
                </div>
                <div class="feature-item">
                    <div class="icon">üîó</div>
                    <h4>Multi-platform Integration</h4>
                    <p>Seamless integration with GitHub, Linear, Slack, and Prefect</p>
                </div>
                <div class="feature-item">
                    <div class="icon">üìà</div>
                    <h4>Analytics & Insights</h4>
                    <p>Detailed analytics and performance insights</p>
                </div>
                <div class="feature-item">
                    <div class="icon">ü§ñ</div>
                    <h4>Autonomous Error Healing</h4>
                    <p>Automatic detection and resolution of common issues</p>
                </div>
            </div>
        </div>
        
        <!-- Actions -->
        <div class="settings-section">
            <h2>üõ†Ô∏è Actions</h2>
            
            <div class="actions">
                <button class="btn" onclick="testConnections()">üîç Test All Connections</button>
                <button class="btn btn-secondary" onclick="exportConfig()">üì• Export Configuration</button>
                <button class="btn btn-secondary" onclick="refreshDashboard()">üîÑ Refresh Dashboard</button>
                <button class="btn btn-danger" onclick="clearCache()">üóëÔ∏è Clear Cache</button>
            </div>
        </div>
    </div>
    
    <script>
        function testConnections() {
            alert('Testing all connections... (Feature coming soon!)');
        }
        
        function exportConfig() {
            const config = {
                github_configured: {{ 'true' if github_token else 'false' }},
                linear_configured: {{ 'true' if linear_api_key else 'false' }},
                slack_configured: {{ 'true' if slack_webhook_url else 'false' }},
                prefect_configured: {{ 'true' if prefect_api_url else 'false' }}
            };
            
            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'contexten-config.json';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function refreshDashboard() {
            window.location.href = '/';
        }
        
        function clearCache() {
            if (confirm('Are you sure you want to clear the cache? This will refresh all data.')) {
                fetch('/api/system/clear-cache', { method: 'POST' })
                    .then(response => response.json())
                    .then(data => {
                        alert('Cache cleared successfully!');
                    })
                    .catch(error => {
                        alert('Error clearing cache: ' + error.message);
                    });
            }
        }
    </script>
</body>
</html>

